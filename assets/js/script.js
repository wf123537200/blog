window.plContainer = `
            <a class="other pl__all" href="/blog/2020/01/10/wo-de-2019/">
                <span class="pl__circle"></span>
                <span class="pl__title">我的2019</span>
                <span class="pl__date">10 Jan 20</span>
            </a>
            <a class="js pl__all" href="/blog/2019/09/26/liao-liao-qian-duan-jian-kong-chang-jing-he-lei-xing/">
                <span class="pl__circle"></span>
                <span class="pl__title">聊聊前端监控（二）--行为监控的技术实现</span>
                <span class="pl__date">26 Sep 19</span>
            </a>
            <a class="other js pl__all" href="/blog/2019/08/29/liao-liao-qian-duan-jian-kong/">
                <span class="pl__circle"></span>
                <span class="pl__title">聊聊前端监控（一）--场景和类型</span>
                <span class="pl__date">29 Aug 19</span>
            </a>
            <a class="other pl__all" href="/blog/2019/05/31/qian-duan-ma-nong-de-chu-lu-san-shi-jian-huan-qian/">
                <span class="pl__circle"></span>
                <span class="pl__title">前端“码农”的出路（三）-- 时间换钱</span>
                <span class="pl__date">31 May 19</span>
            </a>
            <a class="other pl__all" href="/blog/2019/04/26/okrhuan-shi-996bie-pian-zi-ji-liao-gen-ben-shi-zi-xiang-mao-dun/">
                <span class="pl__circle"></span>
                <span class="pl__title">OKR还是996？别骗自己了，根本是自相矛盾！</span>
                <span class="pl__date">26 Apr 19</span>
            </a>
            <a class="other pl__all" href="/blog/2019/04/19/qian-duan-ma-nong-de-chu-lu-er-zheng-tu/">
                <span class="pl__circle"></span>
                <span class="pl__title">前端“码农”的出路（二）-- 正途</span>
                <span class="pl__date">19 Apr 19</span>
            </a>
            <a class=" pl__all" href="/blog/2019/04/02/ma-nong-de-chu-li/">
                <span class="pl__circle"></span>
                <span class="pl__title">“码农”的出路（1）--焦虑</span>
                <span class="pl__date">02 Apr 19</span>
            </a>
            <a class=" pl__all" href="/blog/2019/02/28/jie-shao-astabstract-syntax-treechou-xiang-yu-fa-shu-2/">
                <span class="pl__circle"></span>
                <span class="pl__title">看《人生果实》，思考人生</span>
                <span class="pl__date">28 Feb 19</span>
            </a>
            <a class=" pl__all" href="/blog/2019/02/22/jie-shao-reduxzhu-yao-jie-jue-shi-yao-wen-ti/">
                <span class="pl__circle"></span>
                <span class="pl__title">【前端面试系列1】介绍redux，主要解决什么问题</span>
                <span class="pl__date">22 Feb 19</span>
            </a>
            <a class="other pl__all" href="/blog/2019/01/09/35sui-qian-de-si-kao/">
                <span class="pl__circle"></span>
                <span class="pl__title">迟到的2018年总结</span>
                <span class="pl__date">09 Jan 19</span>
            </a>
            <a class="js pl__all" href="/blog/2018/08/31/huo-qu-domwen-dang-stringde-fang-fa/">
                <span class="pl__circle"></span>
                <span class="pl__title">获取dom文档string的方法</span>
                <span class="pl__date">31 Aug 18</span>
            </a>
            <a class="css pl__all" href="/blog/2018/08/30/cssmodulede-keng/">
                <span class="pl__circle"></span>
                <span class="pl__title">cssmodule 中使用 @keyframe</span>
                <span class="pl__date">30 Aug 18</span>
            </a>
            <a class="js pl__all" href="/blog/2018/07/11/xiao-cheng-xu-kai-fa-kuang-jia-xuan-ze/">
                <span class="pl__circle"></span>
                <span class="pl__title">小程序开发框架选择</span>
                <span class="pl__date">11 Jul 18</span>
            </a>
            <a class=" pl__all" href="/blog/2018/03/15/react/">
                <span class="pl__circle"></span>
                <span class="pl__title">react 和 vue</span>
                <span class="pl__date">15 Mar 18</span>
            </a>
            <a class="other pl__all" href="/blog/2018/01/19/2017nian-you-guo-qu-liao/">
                <span class="pl__circle"></span>
                <span class="pl__title">2017年又过去了</span>
                <span class="pl__date">19 Jan 18</span>
            </a>
            <a class=" pl__all" href="/blog/2017/12/21/jian-tie-ban-shi-jian/">
                <span class="pl__circle"></span>
                <span class="pl__title">剪贴板事件</span>
                <span class="pl__date">21 Dec 17</span>
            </a>
            <a class="css pl__all" href="/blog/2017/12/19/tong-guo-cssjin-zhi-yong-hu-dian-ji-shi-jian/">
                <span class="pl__circle"></span>
                <span class="pl__title">css禁止鼠标事件</span>
                <span class="pl__date">19 Dec 17</span>
            </a>
            <a class="js pl__all" href="/blog/2017/10/26/http-response/">
                <span class="pl__circle"></span>
                <span class="pl__title">http response状态码收集</span>
                <span class="pl__date">26 Oct 17</span>
            </a>
            <a class="other pl__all" href="/blog/2017/05/26/ye-tan-jia-gou/">
                <span class="pl__circle"></span>
                <span class="pl__title">架构浅谈</span>
                <span class="pl__date">26 May 17</span>
            </a>
            <a class=" pl__all" href="/blog/2017/05/12/fetch-api/">
                <span class="pl__circle"></span>
                <span class="pl__title">fetch api</span>
                <span class="pl__date">12 May 17</span>
            </a>
            <a class="js pl__all" href="/blog/2017/04/18/vuede-shi-jian-chuan-ru-wai-bu-chan-shu/">
                <span class="pl__circle"></span>
                <span class="pl__title">vue父组件怎么使用外部对象</span>
                <span class="pl__date">18 Apr 17</span>
            </a>
            <a class="css js pl__all" href="/blog/2017/04/04/zhan-shi-xu-hao-de-ling-chong-fang-fa/">
                <span class="pl__circle"></span>
                <span class="pl__title">展示序号的另一种方法</span>
                <span class="pl__date">04 Apr 17</span>
            </a>
            <a class="css js pl__all" href="/blog/2017/03/03/clickhe-blurshi-jian-de-xian-hou-guan-xi-tan-mi/">
                <span class="pl__circle"></span>
                <span class="pl__title">click和blur事件顺序探秘</span>
                <span class="pl__date">03 Mar 17</span>
            </a>
            <a class=" pl__all" href="/blog/2017/02/05/2016nian-zong-jie-2017nian-gui-hua/">
                <span class="pl__circle"></span>
                <span class="pl__title">2016年总结，2017年..</span>
                <span class="pl__date">05 Feb 17</span>
            </a>
            <a class="js pl__all" href="/blog/2016/12/20/date-setmonth-de-keng/">
                <span class="pl__circle"></span>
                <span class="pl__title">Date setmonth的问题</span>
                <span class="pl__date">20 Dec 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/11/02/spdyhe-http2chai-bie-zong-jie/">
                <span class="pl__circle"></span>
                <span class="pl__title">http2特性简介</span>
                <span class="pl__date">02 Nov 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/10/25/liu-lan-qi-ji-zhu-mi-ma-de-qian-duan-jie-jue-fang-an/">
                <span class="pl__circle"></span>
                <span class="pl__title">浏览器记住密码的前端解决方案</span>
                <span class="pl__date">25 Oct 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/10/17/zheng-ze-biao-da-shi-de-le-qu/">
                <span class="pl__circle"></span>
                <span class="pl__title">数字千分位正则</span>
                <span class="pl__date">17 Oct 16</span>
            </a>
            <a class=" pl__all" href="/blog/2016/09/22/iosgun-dong-bu-liu-chang/">
                <span class="pl__circle"></span>
                <span class="pl__title">解决ios滚动不流畅</span>
                <span class="pl__date">22 Sep 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/09/18/vue-routerpei-zhi/">
                <span class="pl__circle"></span>
                <span class="pl__title">vue-router配置</span>
                <span class="pl__date">18 Sep 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/08/15/vueshuang-xiang-bang-ding-xiang-jie/">
                <span class="pl__circle"></span>
                <span class="pl__title">vue双向绑定</span>
                <span class="pl__date">15 Aug 16</span>
            </a>
            <a class="other pl__all" href="/blog/2016/07/20/hao-dai-ma/">
                <span class="pl__circle"></span>
                <span class="pl__title">你真能写好代码？</span>
                <span class="pl__date">20 Jul 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/07/12/httpsxie-yi-de-shuo-ming/">
                <span class="pl__circle"></span>
                <span class="pl__title">一问就蒙(3)--https协议简介</span>
                <span class="pl__date">12 Jul 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/06/22/pan-duan-liu-lan-qi-shi-fou-fang-da-de-fang-fa/">
                <span class="pl__circle"></span>
                <span class="pl__title">判断浏览器缩放比例的方法</span>
                <span class="pl__date">22 Jun 16</span>
            </a>
            <a class="other pl__all" href="/blog/2016/06/22/quan-zhan-shi-ge-wei-ming-ti/">
                <span class="pl__circle"></span>
                <span class="pl__title">全栈是个伪命题？！</span>
                <span class="pl__date">22 Jun 16</span>
            </a>
            <a class=" pl__all" href="/blog/2016/06/09/qian-duan-huan-cun-xiang-xi-shuo-ming/">
                <span class="pl__circle"></span>
                <span class="pl__title">一问就蒙(2)----http缓存头</span>
                <span class="pl__date">09 Jun 16</span>
            </a>
            <a class="css pl__all" href="/blog/2016/04/23/chui-zhi-ju-zhong/">
                <span class="pl__circle"></span>
                <span class="pl__title">一问就蒙(1)--垂直居中</span>
                <span class="pl__date">23 Apr 16</span>
            </a>
            <a class="other pl__all" href="/blog/2016/04/17/itcong-ye-zhe-de-mian-shi-jing-2/">
                <span class="pl__circle"></span>
                <span class="pl__title">it从业者的面试经</span>
                <span class="pl__date">17 Apr 16</span>
            </a>
            <a class=" pl__all" href="/blog/2016/02/25/zen-yao-cai-neng-you-si-xiang/">
                <span class="pl__circle"></span>
                <span class="pl__title">怎么才能有思想</span>
                <span class="pl__date">25 Feb 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/01/30/zhuan-zui-qiang-da-de-js/">
                <span class="pl__circle"></span>
                <span class="pl__title">最强大的js，轻松搞崩浏览器</span>
                <span class="pl__date">30 Jan 16</span>
            </a>
            <a class="css js pl__all" href="/blog/2016/01/18/animationdian-ji/">
                <span class="pl__circle"></span>
                <span class="pl__title">元素animation执行时无法点击</span>
                <span class="pl__date">18 Jan 16</span>
            </a>
            <a class="css pl__all" href="/blog/2016/01/18/after-wei-lei-de-dong-hua-chu-li/">
                <span class="pl__circle"></span>
                <span class="pl__title">:after 伪类的animation事件不触发</span>
                <span class="pl__date">18 Jan 16</span>
            </a>
            <a class="other pl__all" href="/blog/2016/01/15/2015yuan-qu-2016lai-qiao-men/">
                <span class="pl__circle"></span>
                <span class="pl__title">2015远去，2016来了</span>
                <span class="pl__date">15 Jan 16</span>
            </a>
            <a class="js pl__all" href="/blog/2016/01/12/zhuan-wei-xin-bu-neng-zi-dong-bo-fang-yin-pin/">
                <span class="pl__circle"></span>
                <span class="pl__title">（转）微信不能自动播放音频</span>
                <span class="pl__date">12 Jan 16</span>
            </a>
            <a class="js pl__all" href="/blog/2015/12/15/wei-xin-fen-xiang-jie-kou-diao-yong-de-qi-guai-wen-ti/">
                <span class="pl__circle"></span>
                <span class="pl__title">微信js-sdk使用的奇葩问题</span>
                <span class="pl__date">15 Dec 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/12/15/an-zhuo-shou-ji-uashou-ji/">
                <span class="pl__circle"></span>
                <span class="pl__title">从UA看厂商</span>
                <span class="pl__date">15 Dec 15</span>
            </a>
            <a class="ghost pl__all" href="/blog/2015/11/13/gityuan-cheng-cao-zuo-zhuan/">
                <span class="pl__circle"></span>
                <span class="pl__title">git远程操作（转）</span>
                <span class="pl__date">13 Nov 15</span>
            </a>
            <a class="ghost pl__all" href="/blog/2015/11/13/nginx-qi-dong-zhong-qi-ming-ling-2/">
                <span class="pl__circle"></span>
                <span class="pl__title">nginx 启动重启命令</span>
                <span class="pl__date">13 Nov 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/11/03/csstextshi-yong-zhi-keng/">
                <span class="pl__circle"></span>
                <span class="pl__title">手机端cssText无法赋值</span>
                <span class="pl__date">03 Nov 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/10/19/iosduan-audiobiao-qian-zi-dong-bo-fang-de-fang-fa/">
                <span class="pl__circle"></span>
                <span class="pl__title">ios端audio标签自动播放</span>
                <span class="pl__date">19 Oct 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/10/15/qqliu-lan-qi-he-wei-xin-liu-lan-qi-ua/">
                <span class="pl__circle"></span>
                <span class="pl__title">qq浏览器和微信浏览器 ua</span>
                <span class="pl__date">15 Oct 15</span>
            </a>
            <a class="other pl__all" href="/blog/2015/06/30/2015nian-shang-ban-nian/">
                <span class="pl__circle"></span>
                <span class="pl__title">2015年上半年...</span>
                <span class="pl__date">30 Jun 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/06/22/javascriptxing-neng-you-hua-du-shu-bi-ji/">
                <span class="pl__circle"></span>
                <span class="pl__title">《javascript性能优化》读书笔记</span>
                <span class="pl__date">22 Jun 15</span>
            </a>
            <a class="css js pl__all" href="/blog/2015/06/03/shou-ji-shu-ping-pan-duan-han-shu/">
                <span class="pl__circle"></span>
                <span class="pl__title">微信横屏问题</span>
                <span class="pl__date">03 Jun 15</span>
            </a>
            <a class=" pl__all" href="/blog/2015/05/01/css3huan-dong-gong-shi/">
                <span class="pl__circle"></span>
                <span class="pl__title">Css3动画思路和缓动公式</span>
                <span class="pl__date">01 May 15</span>
            </a>
            <a class=" pl__all" href="/blog/2015/03/09/javascriptyu-yan-jing-cui-du-shu-bi-ji-si-2/">
                <span class="pl__circle"></span>
                <span class="pl__title">《javascript语言精粹》读书笔记五</span>
                <span class="pl__date">09 Mar 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/03/09/jsjing-que-si-ze-yun-suan/">
                <span class="pl__circle"></span>
                <span class="pl__title">js精确四则运算</span>
                <span class="pl__date">09 Mar 15</span>
            </a>
            <a class="css pl__all" href="/blog/2015/03/06/shou-ji-duan-liu-lan-qi-tui-jian-zi-ti/">
                <span class="pl__circle"></span>
                <span class="pl__title">手机端浏览器推荐字体</span>
                <span class="pl__date">06 Mar 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/03/05/jskai-fa-gui-fan/">
                <span class="pl__circle"></span>
                <span class="pl__title">前端开发规范1（js规范）</span>
                <span class="pl__date">05 Mar 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/03/03/dan-chu-chuang-kou-bei-liu-lan-qi-lan-jie-de-jie-jue-fang-an/">
                <span class="pl__circle"></span>
                <span class="pl__title">window.open被浏览器拦截的解决方案</span>
                <span class="pl__date">03 Mar 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/03/02/javascriptyu-yan-jing-cui-du-shu-bi-ji-si/">
                <span class="pl__circle"></span>
                <span class="pl__title">《javascript语言精粹》读书笔记四</span>
                <span class="pl__date">02 Mar 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/02/27/javascriptyu-yan-jing-cui-du-shu-bi-ji-3/">
                <span class="pl__circle"></span>
                <span class="pl__title">《javascript语言精粹》读书笔记二</span>
                <span class="pl__date">27 Feb 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/02/26/javascriptyu-yan-jing-cui-du-shu-bi-ji-2/">
                <span class="pl__circle"></span>
                <span class="pl__title">《javascript语言精粹》读书笔记一</span>
                <span class="pl__date">26 Feb 15</span>
            </a>
            <a class="js pl__all" href="/blog/2015/02/26/javascriptyu-yan-jing-cui-du-shu-bi-ji/">
                <span class="pl__circle"></span>
                <span class="pl__title">《javascript语言精粹》读书笔记三</span>
                <span class="pl__date">26 Feb 15</span>
            </a>
            <a class="css js front-end-ac pl__all" href="/blog/2015/02/26/zhuan-qian-duan-ji-neng-shu/">
                <span class="pl__circle"></span>
                <span class="pl__title">（转）前端技能树</span>
                <span class="pl__date">26 Feb 15</span>
            </a>
            <a class="css pl__all" href="/blog/2015/02/11/dang-nei-rong-chao-chu-dang-qian-kuan-du-shi-shi-yong-dai-ti-chang-chu-de-bu-fen/">
                <span class="pl__circle"></span>
                <span class="pl__title">使用‘...’代替文本长出的部分</span>
                <span class="pl__date">11 Feb 15</span>
            </a>
            <a class="other pl__all" href="/blog/2015/01/28/bie-liao-2014ni-hao-2015/">
                <span class="pl__circle"></span>
                <span class="pl__title">别了，2014！你好，2015</span>
                <span class="pl__date">28 Jan 15</span>
            </a>
            <a class="ghost pl__all" href="/blog/2015/01/16/ghost-qi-dong-he-ting-zhi-ming-ling/">
                <span class="pl__circle"></span>
                <span class="pl__title">ghost 启动和停止命令</span>
                <span class="pl__date">16 Jan 15</span>
            </a>
            <a class="ghost pl__all" href="/blog/2015/01/16/a-li-yun-de-gitdai-ma-tuo-guan/">
                <span class="pl__circle"></span>
                <span class="pl__title">阿里云的git代码托管</span>
                <span class="pl__date">16 Jan 15</span>
            </a>
            <a class="ghost pl__all" href="/blog/2015/01/16/ghost-theme-ti-huan/">
                <span class="pl__circle"></span>
                <span class="pl__title">ghost theme 替换</span>
                <span class="pl__date">16 Jan 15</span>
            </a>
            <a class="other pl__all" href="/blog/2015/01/15/welcome-to-ghost-2/">
                <span class="pl__circle"></span>
                <span class="pl__title">欢迎来到zak的小站</span>
                <span class="pl__date">15 Jan 15</span>
            </a>
        `;/**
 * 3-Ghost Theme
 * @update by zak wu
 * @author Peiwen Lu (P233)
 */

/**
 * 类收集
 * @constructor
 */
var Blog = function Blog() {
  this.postsList = $('#pl__container');
  this.tag1       = $('.pl__all');
  this.tag2       = '.ghost';
  this.tag3       = '.js';
  this.tag4       = '.css';
  this.tag5       = '.front-end-ac';
  this.tag6       = '.other';
  this.sidebar    = $('#sidebar');
  this.container  = $('#post');
  this.content    = $('#pjax');
  this.button     = $('#icon-arrow');
};

Blog.fn = Blog.prototype;

/**
 * 初始化函数
 */
Blog.fn.init = function init() {
  var _this = this;
  /* mobile fix */
  // Detect window size, if less than 1280px add class 'mobile' to sidebar therefore it will be auto hide when trigger the pjax request in small screen devices.
  if ($(window).width() <= 1280) $('#sidebar').addClass('mobile');

  var postListReady = function postListReady(){
    // sidebar初始化选中
    // If sidebar has class 'mobile', hide it after clicking.
    _this.tag1.on('click', function() {
      $(this).addClass('active').siblings().removeClass('active');
      if (_this.sidebar.hasClass('mobile')) {
        $('#sidebar, #pjax, #icon-arrow').addClass('fullscreen');
      }
    });

    // 绑定所有文章列表
    _this.articleClick();
    // 绑定非文章列表
    _this.noAticleClick();
    // 其他绑定事件
    _this.eventBind();
    // 初始化非文章列表
    _this.initNoArts();
    // pjax
    _this.PjaxBind();
    // pjax 回调
    _this.afterPjax();
  };

  postListReady();
  if(_this.postsList.find('.pl__all') && _this.postsList.find('.pl__all').length === 0){
    _this.postsList.load('/ .pl__all', function() {
      // 初始化非文章列表
      _this.initNoArts();
    });
  }
};

/**
 * 文章部分绑定click
 */
Blog.fn.articleClick = function articleClick() {
  var _this = this;
  // 文章列表click绑定
  // Tags switcher
  var clickHandler = function clickHandler(k) {
    return function() {
      $(this).addClass('active').siblings().removeClass('active');
      // 展示和隐藏
      if(k !== 1) {
        $('.pl__all').hide();
        $(_this['tag'+k]).delay(50).fadeIn(350);
      } else {
        $('.pl__all').delay(50).fadeIn(350);
      }
      // 非文章的部分隐藏
      $('.no-active').hide();
    }
  };

  for (var i = 1; i <= 6; i++) {
    $('#js-label' + i).on('click', clickHandler(i));
  }
};

/**
 * 为非文章部分绑定
 */
Blog.fn.noAticleClick = function noAticleClick() {
  var _this = this;

  // 增加两步，用于展示作品和分享ppt
  var swithAndShow = function swithAndShow() {
    $(this).addClass('active').siblings().removeClass('active');
    // 隐藏文章部分
    $('.pl__all').hide();
    // 非文章的部分隐藏
    $('.no-active').hide();
  };

  // $('#sthfuns').on('click', function() {
  //   swithAndShow.call(this);
  //   $('#sthfuns-show').removeClass('f-hide').delay(50).fadeIn(350);
  // });
  //
  // $('#shareppt').on('click', function() {
  //   swithAndShow.call(this);
  //   $('#shareppt-show').removeClass('f-hide').delay(50).fadeIn(350);
  // });
};

/**
 * 事件绑定
 */
Blog.fn.eventBind = function eventBind() {
  var _this = this;

  // Enable fullscreen.
  $('#js-fullscreen').on('click', function() {
    if (_this.button.hasClass('fullscreen')) {
      _this.sidebar.removeClass('fullscreen');
      _this.button.removeClass('fullscreen');
      _this.content.delay(300).queue(function(){
        $(this).removeClass('fullscreen').dequeue();
      });
    } else {
      _this.sidebar.addClass('fullscreen');
      _this.button.addClass('fullscreen');
      _this.content.delay(200).queue(function(){
        $(this).addClass('fullscreen').dequeue();
      });
    }
  });

  $('#mobile-avatar').on('click', function(){
    $('#sidebar, #pjax, #icon-arrow').addClass('fullscreen');
  });

  // 简单搜索
  $('#search-input').on('input', function(e) {
    $('#pl__container .pl__title').each(function(it, key) {
        if(key.innerHTML.indexOf(e.currentTarget.value) < 0) {
          $(key).parent().hide();
        } else {
          $(key).parent().show();
        }
    });
  });
};

/**
 * pjax 绑定
 * @constructor
 */
Blog.fn.PjaxBind = function PjaxBind(){
  var _this = this;
  // Pjax
  $(document).pjax('#mobile-avatar, .pl__all', '#pjax', { fragment: '#pjax', timeout: 10000 });
  $(document).on({
    'pjax:click': function() {
      _this.content.removeClass('fadeIn').addClass('fadeOut');
      NProgress.start();
    },
    'pjax:start': function() {
      _this.content.css({'opacity':0});
    },
    'pjax:end': function() {
      NProgress.done();
      _this.container.scrollTop(0);
      _this.content.css({'opacity':1}).removeClass('fadeOut').addClass('fadeIn');
      // 隐藏页面的fullscreen
      if (!_this.button.hasClass('fullscreen')) {
        _this.sidebar.addClass('fullscreen');
        _this.button.addClass('fullscreen');
        _this.content.delay(200).queue(function(){
          $(this).addClass('fullscreen').dequeue();
        });
      }

      _this.afterPjax();
    }
  });
};

/**
 * Pjax 回调函数
 */
Blog.fn.afterPjax = function afterPjax() {
  var _this = this;

  // Codepen embed js
  var CodePenEmbed={width:"100%",init:function(){this.showCodePenEmbeds(),this.listenToParentPostMessages()},showCodePenEmbeds:function(){var e=document.getElementsByClassName("codepen");for(var t=e.length-1;t>-1;t--){var n=this._getParamsFromAttributes(e[t]);n=this._convertOldDataAttributesToNewDataAttributes(n);var r=this._buildURL(n),i=this._buildIFrame(n,r);this._addIFrameToPage(e[t],i)}},_getParamsFromAttributes:function(e){var t={},n=e.attributes;for(var r=0,i=n.length;r<i;r++)name=n[r].name,name.indexOf("data-")===0&&(t[name.replace("data-","")]=n[r].value);return t},_convertOldDataAttributesToNewDataAttributes:function(e){return e.href&&(e["slug-hash"]=e.href),e.type&&(e["default-tab"]=e.type),e.safe&&(e["safe"]=="true"?e.animations="run":e.animations="stop-after-5"),e},_buildURL:function(e){var t=this._getHost(e),n=e.user?e.user:"anon",r="?"+this._getGetParams(e),i=[t,n,"embed",e["slug-hash"]+r].join("/");return i.replace(/\/\//g,"//")},_getHost:function(e){return e.host?e.host:document.location.protocol=="file:"?"http://codepen.io":"//codepen.io"},_getGetParams:function(e){var t="",n=0;for(var r in e)t!==""&&(t+="&"),t+=r+"="+encodeURIComponent(e[r]);return t},_buildIFrame:function(e,t){var n={id:"cp_embed_"+e["slug-hash"].replace("/","_"),src:t,scrolling:"no",frameborder:"0",height:this._getHeight(e),allowTransparency:"true","class":"cp_embed_iframe",style:"width: "+this.width+"; overflow: hidden;"},r="<iframe ";for(var i in n)r+=i+'="'+n[i]+'" ';return r+="></iframe>",r},_getHeight:function(e){return e.height?e["height"]=="auto"?300:e.height:300},_addIFrameToPage:function(e,t){if(e.parentNode){var n=document.createElement("div");n.innerHTML=t,e.parentNode.replaceChild(n,e)}else e.innerHTML=t},listenToParentPostMessages:function(){var eventMethod=window.addEventListener?"addEventListener":"attachEvent",eventListener=window[eventMethod],messageEvent=eventMethod=="attachEvent"?"onmessage":"message";eventListener(messageEvent,function(e){try{var dataObj=eval("("+e.data+")"),iframe=document.getElementById("cp_embed_"+dataObj.hash);iframe&&(iframe.height=dataObj.height)}catch(err){}},!1)}};

// Open links in new tab
  $('#post__content a').attr('target','_blank');

  // Highlight code after pjax
  // http://schier.co/post/how-to-re-run-prismjs-on-ajax-content
  Prism.highlightAll();

  // Embed codepen after pjax
  CodePenEmbed.init();

  // Generate post TOC for h1 h2 and h3
  var toc = $('#post__toc-ul');
  // Empty TOC and generate an entry for h1
  toc.empty().append('<li class="post__toc-li post__toc-h1"><a href="#post__title" class="js-anchor-link">' + $('#post__title').text() + '</a></li>');

  // Generate entries for h2 and h3
  $('#post__content').children('h2,h3').each(function() {
    if ($(this).prop("tagName") == 'H2') {
      toc.append('<li class="post__toc-li post__toc-h2"><a href="#' + $(this).attr('id') + '" class="js-anchor-link">' + $(this).text() + '</a></li>');
    } else {
      toc.append('<li class="post__toc-li post__toc-h3"><a href="#' + $(this).attr('id') + '" class="js-anchor-link">' + $(this).text() + '</a></li>');
    }
  });

  // Smooth scrolling
  $('.js-anchor-link').on('click', function() {
    var target = $(this.hash);
    _this.container.animate({scrollTop: target.offset().top + _this.container.scrollTop() - 70}, 500, function() {
      target.addClass('flash').delay(700).queue(function() {
        $(this).removeClass('flash').dequeue();
      });
    });
  });

  // 处理静态页面非主业进入时导致的列表为空
  if(!$('#pl__container').html().trim()) {
    $('#pl__container').html(window.plContainer || '');
  }
}

/**
 * 简单模板引擎
 */
Blog.fn.noArticalAddDom = function noArticalAddDom(obj) {
  var domTpl = '<a class="{{className}}" href="{{url}}" target="_blank">' +
                  '<span class="pl__circle"></span>' +
                  '<span class="pl__title">{{title}}</span>' +
                  '<span class="pl__date">{{date}}</span>' +
              '</a>';

  return domTpl.replace(/({{(\w*)}})/gi, function($0, $1, $2) {
    return obj[$2];
  });
};

/**
 * 初始化非文章列表
 */
Blog.fn.initNoArts = function initNoArts() {
  var _this = this;

  var sfList = [{
    className: 'sthfuns',
    url: '//' + location.host + '/node/assets/performance/preformance.html',
    title: '网页性能报告脚本',
    date: '26 jan 15'
  }, {
    className: 'sthfuns',
    url: '//' + location.host + '/node/assets/testandcover/testandcover.html',
    title: '单元测试和页面测试覆盖率统计脚本',
    date: '16 feb 15'
  }, {
    className: 'sthfuns',
    url: 'http://eng.liveapp.cn/',
    title: '云来场景引擎(需注册)',
    date: '16 feb 15'
  }, {
    className: 'sthfuns',
    url: 'http://myz.uliveapp.com/',
    title: '芈月传(btv推广游戏)',
    date: '16 Dec 15'
  }, {
    className: 'sthfuns',
    url: 'http://www.topgear.com.cn/demo/web/index.html',
    title: '万达寻龙诀(微信游戏)',
    date: '16 Dec 15'
  }, {
    className: 'sthfuns',
    url: 'http://starwars.uliveapp.com/xqdz/',
    title: '星球大战(万达互助推广)',
    date: '14 Feb 16'
  }, {
    className: 'sthfuns',
    url: 'http://xrobot.uliveapp.com/',
    title: 'xrobot(京东扫地机众筹)',
    date: '14 Feb 16'
  }, {
    className: 'sthfuns',
    url: 'http://zhenhu.uliveapp.com/',
    title: '珍护牛奶推广',
    date: '14 Feb 16'
  }, {
    className: 'sthfuns',
    url: 'http://langyu.uliveapp.com/web/index.html',
    title: '成都朗御项目',
    date: '14 Feb 16'
  }];

  var pptList = [{
    className: 'shareppt',
    url: '//' + location.host + '/node/assets/ppts/tpls/bigFe.html',
    title: '大前端发展趋势分享',
    date: '17 feb 15'
  }, {
    className: 'shareppt',
    url: '//' + location.host + '/node/assets/ppts/tpls/jsDoc.html',
    title: 'jsDoc使用分享',
    date: '17 feb 15'
  }, {
    className: 'shareppt',
    url: '//' + location.host + '/node/assets/ppts/tpls/promise.html',
    title: 'promise对象使用剖析',
    date: '17 feb 15'
  }, {
    className: 'shareppt',
    url: '//' + location.host + '/node/assets/ppts/tpls/prototype.html',
    title: 'js内存模型浅谈',
    date: '25 aug 15'
  }];

  var sfRes = '';
  var sPptRes = '';

  for(var i = 0; i < sfList.length; i++) {
    sfRes += _this.noArticalAddDom(sfList[i]);
  }

  for(var i = 0; i < pptList.length; i++) {
    sPptRes += _this.noArticalAddDom(pptList[i]);
  }

  // // 作品集show
  // if(!$('#sthfuns-show')[0]) {
  //   _this.postsList.append('<div class="no-active f-hide" id="sthfuns-show">' + sfRes + '</div>');
  // } else {
  //   $('#sthfuns-show').append(sfRes);
  // }
  // // ppt show
  // if(!$('#shareppt-show')[0]) {
  //   _this.postsList.append('<div class="no-active f-hide" id="shareppt-show">' + sPptRes + '</div>');
  // } else {
  //   $('#shareppt-show').append(sPptRes);
  // }
};

var blog = new Blog();
blog.init();
